import 'dart:typed_data';

import 'package:flutter_test/flutter_test.dart';
import 'package:bqsp_client/bqsp_client.dart';

void main() {
  test('test', () async {
    final client = BqspClient();
    await client.connect('localhost', 8080);
    final msg = Uint8List.fromList([
      149,
      0,
      0,
      0,
      14,
      0,
      1,
      123,
      34,
      100,
      101,
      115,
      99,
      34,
      58,
      34,
      73,
      32,
      108,
      111,
      118,
      101,
      32,
      116,
      104,
      105,
      115,
      32,
      117,
      115,
      101,
      114,
      44,
      32,
      104,
      101,
      32,
      109,
      97,
      107,
      101,
      115,
      32,
      109,
      101,
      32,
      100,
      111,
      32,
      49,
      48,
      120,
      32,
      109,
      111,
      114,
      101,
      32,
      106,
      111,
      98,
      32,
      106,
      117,
      115,
      116,
      32,
      98,
      101,
      99,
      97,
      117,
      115,
      101,
      32,
      104,
      101,
      32,
      100,
      111,
      101,
      115,
      110,
      39,
      116,
      32,
      119,
      97,
      110,
      116,
      32,
      116,
      111,
      32,
      105,
      109,
      112,
      108,
      101,
      109,
      101,
      110,
      116,
      32,
      74,
      83,
      79,
      78,
      32,
      58,
      68,
      68,
      32,
      226,
      157,
      164,
      34,
      44,
      34,
      117,
      115,
      101,
      114,
      34,
      58,
      34,
      50,
      49,
      52,
      55,
      50,
      48,
      54,
      51,
      55,
      48,
      48,
      55,
      49,
      54,
      55,
      52,
      56,
      57,
      34,
      44,
      34,
      118,
      97,
      108,
      117,
      101,
      34,
      58,
      52,
      125
    ]);
    final RateUser res = await client.query(msg);
    assert(res.value == 4);
    assert(res.user == '214720637007167489');
    print(res);
    client.close();
  });
}
